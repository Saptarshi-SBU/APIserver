<!DOCTYPE html>
<html>
<head>
<style>

p {
    margin: 0;
    padding: 0;
}

img { 
    width: 80%; 
    height: 60%; 
}

.marginauto {
    margin: 10px auto 20px;
    //display: none;
}

.marginauto_cap {
    margin: 10px auto 20px;
    text-align: center;
    height: 32px; 
    font-size: 32px;
}

.btn-group button {
  background-color: #4CAF50; /* Green background */
  //border: 1px solid green; /* Green border */
  color: black; /* White text */
  padding: 10px 24px; /* Some padding */
  cursor: pointer; /* Pointer/hand icon */
  float:  right; /* Float the buttons side by side */
  height: 32px;
  width: 64px;
  font-size: 8px;
}

</style>
</head>

<div align="center" style="font-size: 24px;" >
    <a href="http://$SERVER_HOST_IP:4040/api/v1/">Home</a>
</div>
<div class="w3-content", align="center">
  <font size=+1 color="blue"> High Resolution </font>
  <figure>
  <img class="marginauto" id="img" src="http://$SERVER_HOST_IP:4040/api/v1/scaledphoto?img=ca509b27-cd33-45ab-9d71-6e1e2df48b09&scale=50" alt="centered">
  <!-- <div class="marginauto_cap"> <figcaption id="icaption">Image Description </figcaption> </div> -->
  </figure>
<div align="center">
    <label class=marginauto_cap for="tag"> </label>
    <input id='tag-input'  name='tag' type='text' style="height: 24px; width: 360px; font-size: 24px;"> </input>
    <p><button onclick="run_edit()" style="font-size: 12px;"> Comments </button></p>
</div>
<div class="marginauto_cap">
<!--
  <button onclick="run_like()"> LIKE </button>
  <button onclick="run_unlike()"> UNLIKE </button>
  <button onclick="run_delete()"> DELETE </button>
  <p><a href="http://$SERVER_HOST_IP:4040/api/v1/rawphoto?img=ca509b27-cd33-45ab-9d71-6e1e2df48b09" style="font-size: 24px;
  text-decoration:none" download="ca509b27-cd33-45ab-9d71-6e1e2df48b09.jpg">Download</a></p>
  -->
</div>
</div>

<script>

// holds json for all photos
var json_template = '{ "value" : { "uuid" : "ca509b27-cd33-45ab-9d71-6e1e2df48b09", "tags" : " " } }'

function run_like() {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "http://$SERVER_HOST_IP:4040/api/v1/likephoto", true);
    obj = JSON.parse(json_template);
    xmlhttp.send(obj.value.uuid);
}

function run_unlike() {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "http://$SERVER_HOST_IP:4040/api/v1/unlikephoto", true);
    obj = JSON.parse(json_template);
    xmlhttp.send(obj.value.uuid);
}

function run_delete() {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "http://$SERVER_HOST_IP:4040/api/v1/deletephoto", true);
    obj = JSON.parse(json_template);
    xmlhttp.send(obj.value.uuid);
}

function run_edit() {
    newcap = document.getElementById("tag-input")
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            newcap = document.getElementById("tag-input")
            newcap.value = ""
            console.log("reset done")
        } else {
            console.log(this.status)
        }
    };
    xmlhttp.open("POST", "http://$SERVER_HOST_IP:4040/api/v1/updatephoto", true);
    obj = JSON.parse(json_template);
    obj.value.tags = newcap.value
    xmlhttp.send(JSON.stringify(obj));
    console.log(newcap.value)
}

function run_download() {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            console.log("reply")
        } else {
            console.log(this.status)
        }
    };
    obj = JSON.parse(json_template);
    xmlhttp.open("GET", "http://$SERVER_HOST_IP:4040/api/v1/downloadphoto?img=" + obj.value.uuid, true);
    xmlhttp.send(obj.value.uuid);
    console.log('download :' + obj.value.uuid)
}
</script>
</html>
