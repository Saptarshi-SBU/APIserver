<!DOCTYPE html>
<html>
<head>
<style>

a {
    text-decoration: none;
}

img { 
    width: 50%; 
}
.marginauto {
    margin: 20px auto 20px;
    display: block;
}

</style>
</head>

<body>
<div align="center" style="font-size: 32px;" >
    <br> My Albums </br>
</div>    
<p id="demo"></p>
<script type="text/javascript">
  function run_albumsearch() {
    var xmlhttp  = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
            var txt = ""
            var img_urls = ""
            var arr = JSON.parse(xmlhttp.responseText)
            console.log('\nlog: ' + arr.length)
            console.log('\nlog: ' + arr)
            for (var i in arr) {
                text = arr[i].value.tags
                image = encodeURIComponent(text)
                console.log(image)
                img_urls += "<div align=center> <font size=+2>" + "Album : <a href=http://192.168.0.12:4040/api/v1/myalbum?img=" + image + ">" + arr[i].value.tags + "</a>" + " (" +  arr[i].value.count + ")" + "</font> </div>"
                img_urls += "<div><img class=marginauto src=http://192.168.0.12:4040/api/v1/scaledphoto?img=" +
                    arr[i].value.uuid + " alt=centered image/></div>"
            }
            document.getElementById("demo").innerHTML = img_urls;
        }
    };
    xmlhttp.open("POST", 'http://192.168.0.12:4040/api/v1/myalbums');
    xmlhttp.send();
  }

document.addEventListener("DOMContentLoaded", function() {
   run_albumsearch();
});

</script>  
</body>
</html>
